{% load static %}
<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Advance Payment</title>
<link rel="stylesheet" href="{% static 'main/vendors/themify-icons/css/themify-icons.css' %}">
<link rel="stylesheet" href="{% static 'main/css/meyawo.css' %}">
<link rel="stylesheet" href="{% static 'main/css/custom.css' %}">
</head><body class="has-static-nav">
{% include 'layouts/navbar.html' with static_nav=True %}
<div class="container page-section-spacer" style="max-width:640px;">
  <h2 class="mb-3">Making an advance payment</h2>
  <p class="text-muted mb-4">Enter any positive amount and optionally increase the quantity if you wish to multiply it. This will appear in your cart as a separate line.</p>
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %}
  <form method="post" class="border rounded p-4 bg-light" id="donation-form" novalidate>
    {% csrf_token %}
    <div class="form-group">
      <label for="amount">Amount (USD)</label>
      <input type="number" step="0.01" min="0.01" class="form-control" id="amount" name="amount" placeholder="50.00" required>
    </div>
    <div class="form-group" style="max-width:200px;">
      <label class="d-block">Quantity</label>
      <div class="input-group">
        <div class="input-group-prepend"><button type="button" class="btn btn-outline-secondary" id="qty-dec">-</button></div>
        <input type="text" class="form-control text-center" id="qty" name="qty" value="1">
        <div class="input-group-append"><button type="button" class="btn btn-outline-secondary" id="qty-inc">+</button></div>
      </div>
    </div>
    <button class="btn btn-gradient btn-block" type="submit">Add to Cart</button>
    <a href="{% url 'store' %}" class="btn btn-link btn-sm mt-2">Back to Store</a>
  </form>
  <div class="mt-4 small text-muted">This is treated like a product only for checkout purposes. Taxes / shipping do not apply.</div>
</div>
<script>
(function(){
  const dec=document.getElementById('qty-dec');
  const inc=document.getElementById('qty-inc');
  const qty=document.getElementById('qty');
  function sanitize(){ let v=parseInt(qty.value,10); if(isNaN(v)||v<1) v=1; if(v>999) v=999; qty.value=v; }
  dec.addEventListener('click',()=>{sanitize(); qty.value=Math.max(1, parseInt(qty.value,10)-1);});
  inc.addEventListener('click',()=>{sanitize(); qty.value=Math.min(999, parseInt(qty.value,10)+1);});
  qty.addEventListener('input',sanitize);
})();
</script>
<script src="{% static 'main/vendors/jquery/jquery-3.4.1.js' %}"></script>
<script src="{% static 'main/vendors/bootstrap/bootstrap.bundle.js' %}"></script>
<script src="{% static 'main/vendors/bootstrap/bootstrap.affix.js' %}"></script>
<script src="{% static 'main/js/meyawo.js' %}"></script>
<script src="{% static 'main/js/custom.js' %}"></script>
</body></html>
